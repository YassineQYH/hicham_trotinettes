<section class="section-contact" id="contact">
    <div class="container">
        <h1>Nous contacter !</h1>
        <p>Remplissez le formulaire ci-dessous pour communiquer avec l’un des membres de notre équipe. Nous essaierons de vous répondre dans les 48 heures. Si nous ne répondons pas dans ce délai, n’hésitez pas à utiliser à nouveau le formulaire.</p>

        {# ✅ Affichage des messages flash #}
        {% for label, messages in app.flashes %}
            {% for message in messages %}
                <div class="alert alert-{{ label }}" style="
                    padding: 10px 15px;
                    margin-bottom: 20px;
                    border-radius: 5px;
                    {% if label == 'notice' %} background-color: #ffe6b3; color: #664d00; {% endif %}
                    {% if label == 'error' %} background-color: #f8d7da; color: #721c24; {% endif %}
                ">
                    {{ message }}
                </div>
            {% endfor %}
        {% endfor %}

        {{ form_start(formcontact, {'attr': {'class': 'form', 'name': 'contactez-moi'}}) }}

        <div class="form-group">
            <label for="name">Nom & Prénom*</label>
            {{ form_widget(formcontact.name, {'attr': {'placeholder': 'Nom & Prénom'}}) }}
            {{ form_errors(formcontact.name) }}
        </div>

        <div class="form-group">
            <label for="tel">N° de téléphone*</label>
            {{ form_widget(formcontact.tel, {
                'attr': {
                    'placeholder': '+33612345678',
                    'pattern': '^\\+((33[67]\\d{8})|(32[4-7]\\d{8}))$',
                    'title': 'Veuillez saisir un numéro valide : +33 6XXXXXXXX (France) ou +32 4XXXXXXXX (Belgique)',
                    'required': true
                }
            }) }}
            {{ form_errors(formcontact.tel) }}
        </div>

        <div class="form-group">
            <label for="email">Adresse E-mail*</label>
            {{ form_widget(formcontact.email, {
                'attr': {
                    'placeholder': 'Saisissez votre e-mail',
                    'pattern': '[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}(\.[a-z]{2,})?',
                    'title': 'Format attendu: xxx@xxx.xx ou xxx@xxx.xx.xx',
                    'required': true
                }
            }) }}
            {{ form_label(formcontact.email) }}
            {{ form_errors(formcontact.email) }}
        </div>

        <div class="form-group">
            <label for="company">Société</label>
            {{ form_widget(formcontact.company, {'attr': {'placeholder': 'Société'}}) }}
            {{ form_errors(formcontact.company) }}
        </div>

        <div class="form-group full">
            <label for="message">Votre message ?</label>
            {{ form_widget(formcontact.message, {'attr': {'placeholder': 'Votre message'}}) }}
            {{ form_errors(formcontact.message) }}
        </div>

        {# Champ honeypot totalement invisible #}
        {{ form_widget(formcontact.honeypot, {
            'label': false,
            'attr': {
                'class': 'honeypot-field',
                'autocomplete': 'off',
                'tabindex': '-1',
                'style': 'display:none !important; visibility:hidden; height:0; overflow:hidden;'
            }
        }) }}

        <div class="submit-group">
            <input type="submit" value="Envoyer" />
        </div>

        {{ form_end(formcontact, {'render_rest': false}) }}
    </div>
</section>
