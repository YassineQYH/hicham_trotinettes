{# templates/maintenance/index.html.twig #}

{# {% block maintenance_page %} #}
<!-- MAINTENANCE TEMPLATE START -->
    <div class="maintenance-wrapper">
        <h1>ðŸš§ Le site est en maintenance</h1>
        <p>Seul un administrateur peut se connecter pour gÃ©rer le site.</p>
        <a class="button" id="open-login-popup">Connexion admin</a>

        {# Inclure le HTML du popup login #}
        {{ include('partials/login-register.html.twig') }}
    </div>

    {# {% block stylesheets %} #}
        <style>
            body { font-family: sans-serif; text-align: center; margin-top: 100px; }
            h1 { color: #c0392b; }
            a.button {
                display: inline-block; margin-top: 20px; padding: 10px 20px;
                background: #3498db; color: white; text-decoration: none; border-radius: 4px;
                cursor: pointer;
            }
        </style>

            {# Icones rÃ©seaux sociaux #}
            <link rel="stylesheet" href="https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css" />
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" />
            <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">

            {# Bootstrap #}
            <link rel="stylesheet" href="{{ asset('assets/css/bootstrap.min.css') }}">

            {# AOS #}
            <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />

            {# Glidejs #}
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Glide.js/3.4.1/css/glide.core.css" />
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Glide.js/3.4.1/css/glide.theme.css" />

            {# CSS personnalisÃ©es #}
            <link rel="stylesheet" href="{{ asset('assets/css/cart.css') }}">
            <link rel="stylesheet" href="{{ asset('assets/css/nav.css') }}">
            <link rel="stylesheet" href="{{ asset('assets/css/carrousel.css') }}">
            <link rel="stylesheet" href="{{ asset('assets/css/section.css') }}">
            <link rel="stylesheet" href="{{ asset('assets/css/product-is-best.css') }}">
            <link rel="stylesheet" href="{{ asset('assets/css/lightslider.css') }}">
            <link rel="stylesheet" href="{{ asset('assets/css/login-register.css') }}">
            <link rel="stylesheet" href="{{ asset('assets/css/contact-form.css') }}">
            <link rel="stylesheet" href="{{ asset('assets/css/footer.css') }}">
            <link rel="stylesheet" href="{{ asset('assets/css/invoice.css') }}">
            <link rel="stylesheet" href="{{ asset('assets/css/slide-img-product-show.css') }}">
            <link rel="stylesheet" href="{{ asset('assets/css/msg-d-alerte.css') }}">
            <link rel="stylesheet" href="{{ asset('assets/css/promos-site.css') }}">
            <link rel="stylesheet" href="{{ asset('assets/css/show-product-slider.css') }}">
            <link rel="stylesheet" href="{{ asset('assets/css/products.css') }}">
            {# <link rel="stylesheet" href="{{ asset('assets/css/bpost-label.css') }}"> #}
    {# {% endblock %} #}

    {# {% block javascripts %} #}
        <script>
            // Ouvrir le popup login
            document.getElementById('open-login-popup').addEventListener('click', function() {
                const wrapper = document.querySelector('.wrapper');
                if(wrapper) wrapper.classList.add('active-popup');
            });

            // Gestion fermeture du popup
            const iconClose = document.querySelector('.icon-close');
            if(iconClose) {
                iconClose.addEventListener('click', () => {
                    const wrapper = document.querySelector('.wrapper');
                    if(wrapper) wrapper.classList.remove('active-popup');
                });
            }

            $(document).ready(function(){
                $('#cart-toggle').click(function(e){
                    e.preventDefault();
                    $('.cart__slide').toggleClass('open');
                });

                $('ul li').click(function(){
                    $(this).siblings().removeClass('active');
                    $(this).toggleClass('active');
                });

                $('.show-password-login').on('click', function() {
                    const passwordField = $('#inputPassword');
                    const type = passwordField.attr('type') === 'text' ? 'password' : 'text';
                    passwordField.attr('type', type);
                    $(this).text(type === 'text' ? 'Cacher' : 'Afficher');
                });

                $('.show-password').click(function() {
                    const passwordField = $('#register_password_first');
                    const type = passwordField.attr('type') === 'text' ? 'password' : 'text';
                    passwordField.attr('type', type);
                    $(this).text(type === 'text' ? 'cacher' : 'afficher');
                });

                $('.show-password-retype').click(function() {
                    const passwordField = $('#register_password_second');
                    const type = passwordField.attr('type') === 'text' ? 'password' : 'text';
                    passwordField.attr('type', type);
                    $(this).text(type === 'text' ? 'cacher' : 'afficher');
                });
            });

            // ðŸ”” Ouvrir automatiquement le modal login si ?login=1
            document.addEventListener('DOMContentLoaded', function() {
                {% if app.request.get('login') %}
                    const wrapper = document.querySelector('.wrapper');
                    if(wrapper) wrapper.classList.add('active-popup');
                {% endif %}

                {% if app.flashes('register_error') is not empty %}
                    const registerModal = document.querySelector('login');
                    if(registerModal) {
                        registerModal.style.display = 'block';
                    }
                {% endif %}
            });
        </script>

        {# jQuery #}
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script src="{{ asset('assets/js/bootstrap.bundle.js') }}"></script>

        <script src="{{ asset('assets/js/script-login-register.js') }}"></script>
        <script src="{{ asset('assets/js/erreur-register.js') }}"></script>
        <script src="{{ asset('assets/js/show-pwd-login.js') }}"></script>
        <script src="{{ asset('assets/js/show-pwd-register.js') }}"></script>
        <script src="{{ asset('assets/js/cart.js') }}"></script>
    {# {% endblock %} #}
{# {% endblock maintenance_page %} #}
